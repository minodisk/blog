<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
      <title>Snap.Svg on I/O </title>
      <generator uri="https://hugo.spf13.com">Hugo</generator>
    <link>http://localhost:1313/tags/snap.svg/index.xml</link>
    <language>en-us</language>
    
    
    <updated>Mon, 01 Jan 0001 00:00:00 UTC</updated>
    
    <item>
      <title>Path Animation</title>
      <link>http://localhost:1313/post/path-animation</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 UTC</pubDate>
      
      <guid>http://localhost:1313/post/path-animation</guid>
      <description>

&lt;h2 id=&#34;toc_0&#34;&gt;パスアニメーションとは&lt;/h2&gt;

&lt;p&gt;パスに沿ってオブジェクトを移動させるアニメーションのことです。
今回はSnap.svgでSVGをパースし、Illustratorで引いたパスに沿ってDOMを動かしてみます。&lt;/p&gt;

&lt;h2 id=&#34;toc_1&#34;&gt;要点&lt;/h2&gt;

&lt;p&gt;Snap.svgはSVGで絵を書くだけではなく、外部SVGのパースを行うことが可能。
使用するライブラリの役割は以下のとおり。&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;jQuery: DOM操作&lt;/li&gt;
&lt;li&gt;jQuery Transit: アニメーション&lt;/li&gt;
&lt;li&gt;Snap.svg: svgのパース&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;toc_2&#34;&gt;実装&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;javascript&#34;&gt;var fragment
  , ready = _.after(2, function () {
      var path = fragment.select(&#39;g&#39;).select(&#39;*&#39;)
        , totalLength = path.getTotalLength()
        , i = 0
        , point
        , $car = $(&#39;.car&#39;)
        ;

      // ダミー要素のtopを0からパスの全長までanimateします。
      // setIntervalを使って独自にアニメーションするよりも熟れたコードになり、
      // イージングを掛けられるようになるので表現の幅も容易に広がります。
      $(&#39;&amp;lt;div&amp;gt;&#39;)
        .animate({
          top: path.getTotalLength()  // パスの全長を取得
        }, {
          easing: &#39;easeOut&#39;,
          step: function (length) {
            var point = path.getPointAtLength(length)  // パスの現在の長さに対する座標を取得
              , x = point.x                            // x座標
              , y = point.y                            // y座標
              , alpha = point.alpha                    // パスの進む方向
              ;
            $car
              .css({
                x: x
                y: y
                rotate: alpha
              });
          })
        });
    })
    ;
})
;

// DOMのロード
$(document).one(&#39;ready&#39;, ready);
// SVGのロード
Snap.load(&#39;/data/2014-03-07-path-animation.svg&#39;, function (f) {
  fragment = f;
  ready();
});
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>